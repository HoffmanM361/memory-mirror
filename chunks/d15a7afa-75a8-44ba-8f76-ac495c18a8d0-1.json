{
  "id": "d15a7afa-75a8-44ba-8f76-ac495c18a8d0",
  "chunk_ix": 1,
  "created_at": "2025-08-10T11:15:41",
  "source": "web",
  "tags": [
    "memory",
    "system"
  ],
  "content": "ath.dirname(LOG_PATH)\r\n        if not os.path.exists(log_dir):\r\n            os.makedirs(log_dir, exist_ok=True)\r\n        \r\n        with open(LOG_PATH, \"a\") as f:\r\n            f.write(log_message)\r\n        \r\n        print(log_message.strip())  # Also print to console\r\n        \r\n    except Exception as e:\r\n        print(f\"ERROR: write_log failed: {e}\")\r\n\r\ndef get_db_connection():\r\n    \"\"\"Get MariaDB connection with error handling\"\"\"\r\n    conn = None\r\n    \r\n    try:\r\n        conn = mysql.connector.connect(**DB_CONFIG)\r\n        if not conn.is_connected():\r\n            write_log(\"ERROR: get_db_connection - Failed to connect to MariaDB\")\r\n            return None\r\n            \r\n        write_log(\"DEBUG: get_db_connection - Connected to MariaDB successfully\")\r\n        return conn\r\n        \r\n    except MySQLError as e:\r\n        write_log(f\"ERROR: get_db_connection - MySQL error: {e}\")\r\n        return None\r\n    except Exception as e:\r\n        write_log(f\"ERROR: get_db_connection - Unexpected error: {e}\")\r\n        return None\r\n\r\n@conversation_bp.route('/')\r\ndef index():\r\n    \"\"\"Main conversation management page\"\"\"\r\n    return render_template('index.html')\r\n\r\n@conversation_bp.route('/save', methods=['GET', 'POST'])\r\ndef save_conversation():\r\n    \"\"\"Save conversation form and handler\"\"\"\r\n    if request.method == 'GET':\r\n        return render_template('save_conversation.html')\r\n    \r\n    # Handle POST - save the conversation\r\n    conn = None\r\n    cursor = None\r\n    \r\n    try:\r\n        write_log(\"DEBUG: save_conversation - Processing web form submission\")\r\n        \r\n        # Get form data\r\n        title = request.form.get('title', '').strip()\r\n        content = request.form.get('content', '').strip()\r\n        source = request.form.get('source', 'web').strip()\r\n        summary = request.form.get('summary', '').strip()\r\n        tags = request.form.get('tags', '').strip()\r\n        \r\n        # Validation\r\n        if not content:\r\n            flash('Content is required', 'error')\r\n   "
}